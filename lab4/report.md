# Звіт до Лабораторної роботи №4: Аналітичні SQL-запити (OLAP)

**Студенти:** Александров Ігор Анатолійович, Ятченко Ярослав Едуардович
**Група:** ІМ-43
**Дисципліна:** Бази Даних
**Тема:** Фітнес-центр

### Частина 1: Агрегація та групування

**Запит 1.1: Статистика цін на абонементи**

- **Використані функції:** `MIN()`, `MAX()`, `AVG()`.
- **Мета:** Отримати огляд цінової політики клубу — найдешевший, найдорожчий та середній абонемент.
- **Чому це важливо:** Допомагає менеджменту зрозуміти ціновий діапазон послуг.

**Запит 1.2: Розподіл клієнтів за статусом**

- **Використані функції:** `COUNT()`, `GROUP BY`.
- **Мета:** Підрахувати кількість клієнтів у кожній категорії (активні, заблоковані тощо).
- **Чому це важливо:** Дозволяє оцінити "здоров'я" клієнтської бази та відтік користувачів.

**Запит 1.3: Загальна виручка за типами абонементів**

- **Використані функції:** `SUM()`, `COUNT()`, `GROUP BY`, `JOIN`.
- **Мета:** Визначити, скільки грошей приніс кожен тип абонемента.
- **Чому це важливо:** Визначає найбільш прибуткові продукти.

**Запит 1.4: Активні тренери (фільтрація груп)**

- **Використані функції:** `COUNT()`, `GROUP BY`, `HAVING`.
- **Мета:** Знайти тренерів, які ведуть більше одного групового заняття на тиждень.
- **Чому це важливо:** Допомагає балансувати навантаження персоналу.

---

### Частина 2: Об'єднання таблиць (JOIN)

**Запит 2.1: Деталізація активних підписок (INNER JOIN)**

- **Тип об'єднання:** `INNER JOIN`.
- **Що робить:** Поєднує клієнтів з їхніми абонементами та назвами планів.
- **Результат:** Список лише тих клієнтів, які мають діючі покупки. Клієнти без покупок ігноруються.

**Запит 2.2: Перевірка завантаженості тренерів (LEFT JOIN)**

- **Тип об'єднання:** `LEFT JOIN`.
- **Що робить:** Бере список усіх тренерів і приєднує до них індивідуальні бронювання.
- **Результат:** Показує всіх тренерів, навіть якщо у них немає жодного бронювання (в полях бронювання буде `NULL`). Це дозволяє виявити "простоюючих" співробітників.

**Запит 2.3: Аналіз популярності планів (RIGHT JOIN)**

- **Тип об'єднання:** `RIGHT JOIN`.
- **Що робить:** Бере всі типи планів (права таблиця) і приєднує до них факти покупок.
- **Результат:** Дозволяє побачити плани, які ніхто не купував (поля клієнта будуть `NULL`), що є сигналом для перегляду маркетингової стратегії.

---

### Частина 3: Підзапити (subqueries)

**Запит 3.1: Пошук VIP-клієнтів**

- **Тип:** Підзапит у реченні `WHERE ... IN (...)`.
- **Логіка:** Спочатку внутрішній запит знаходить `id` найдорожчого плану, середній запит знаходить клієнтів, що купили цей план, а зовнішній запит виводить їхні імена.
- **Застосування:** Для персональних пропозицій VIP-сегменту.

**Запит 3.2: Відхилення ціни від середньої**

- **Тип:** Скалярний підзапит у реченні `SELECT`.
- **Логіка:** Для кожного рядка плану обчислюється різниця між його ціною та середньою ціною по всій таблиці (обчисленою підзапитом).
- **Застосування:** Аналітика ціноутворення.

**Запит 3.3: Потенційні клієнти для груп**

- **Тип:** Підзапит `WHERE ... NOT IN (...)`.
- **Логіка:** Вибирає клієнтів, чиї ID відсутні в таблиці бронювань групових занять.
- **Застосування:** Формування бази для розсилки реклами групових тренувань тим, хто ними ще не цікавився.

---
